<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>
      WÃ¤rmepumpen Vogtland â€“ Beratung & FÃ¶rderung sichern (bis zu 15.000Â â‚¬)
    </title>
    <meta
      name="description"
      content="Regionale WÃ¤rmepumpenâ€‘Beratung im Vogtland. Kostenfreie Erstberatung vor Ort. Wir Ã¼bernehmen die FÃ¶rderantrÃ¤ge (bis zu 15.000Â â‚¬ mÃ¶glich). Jetzt RÃ¼ckruf anfordern."
    />
    <meta
      property="og:title"
      content="WÃ¤rmepumpen Vogtland â€“ Beratung & FÃ¶rderung sichern"
    />
    <meta
      property="og:description"
      content="Kostenfreie Erstberatung vor Ort. Wir kÃ¼mmern uns um die FÃ¶rderung (bis zu 15.000Â â‚¬ mÃ¶glich)."
    />
    <meta property="og:type" content="website" />
    <meta property="og:locale" content="de_DE" />
    <meta property="og:url" content="" />
    <style>
      :root {
        --bg: #f5f7fb;
        --card: #ffffff;
        --brand: #58d38c;
        --txt: #0b1220;
        --muted: #5b6b82;
        --accent: #4fb0ff;
        --danger: #ff5c7a;
        --ok: #16a34a;
        --shadow: 0 6px 24px rgba(0, 0, 0, 0.12);
        --radius: 16px;
        --radius-sm: 12px;
        --radius-lg: 26px;
        --max: 1100px;
        /* theme helpers */
        --border: rgba(0, 0, 0, 0.1);
        --surface: rgba(0, 0, 0, 0.03);
        --input-bg: #ffffff;
        --page-bg: linear-gradient(180deg, #f5f7fb, #eef2f8);
        --card-bg: #ffffff;
        --illus-bg: radial-gradient(
            180px 100px at 20% 10%,
            rgba(79, 176, 255, 0.12),
            transparent 60%
          ),
          radial-gradient(
            260px 180px at 80% 20%,
            rgba(88, 211, 140, 0.12),
            transparent 60%
          ),
          linear-gradient(160deg, #e8eef7 0%, #f5f7fb 70%);
        --sticky-bg: linear-gradient(
          180deg,
          rgba(245, 247, 251, 0),
          rgba(245, 247, 251, 0.75) 20%,
          rgba(245, 247, 251, 0.95)
        );
      }

      [data-theme="dark"] {
        --bg: #0b1220; /* dunkles Blau fÃ¼r Kontrast */
        --card: #0f1a33; /* etwas heller fÃ¼r Cards */
        --brand: #58d38c; /* grÃ¼n = Energie/Vertrauen */
        --txt: #e9eef7; /* fast weiÃŸ */
        --muted: #9fb0c7; /* SekundÃ¤rtext */
        --accent: #4fb0ff; /* sekundÃ¤rer Akzent */
        --danger: #ff5c7a; /* Fehlerfarbe */
        --ok: #67e8a5; /* Erfolg */
        --shadow: 0 6px 30px rgba(0, 0, 0, 0.25);
        --border: rgba(255, 255, 255, 0.08);
        --surface: rgba(255, 255, 255, 0.04);
        --input-bg: rgba(255, 255, 255, 0.03);
        --page-bg: radial-gradient(
            1200px 600px at 80% -10%,
            rgba(88, 211, 140, 0.12),
            transparent 60%
          ),
          var(--bg);
        --card-bg: linear-gradient(
          180deg,
          rgba(255, 255, 255, 0.06),
          rgba(255, 255, 255, 0.02)
        );
        --illus-bg: radial-gradient(
            180px 100px at 20% 10%,
            rgba(79, 176, 255, 0.15),
            transparent 60%
          ),
          radial-gradient(
            260px 180px at 80% 20%,
            rgba(88, 211, 140, 0.16),
            transparent 60%
          ),
          linear-gradient(160deg, #0b162c 0%, #0e1d38 70%);
        --sticky-bg: linear-gradient(
          180deg,
          rgba(11, 18, 32, 0),
          rgba(11, 18, 32, 0.75) 20%,
          rgba(11, 18, 32, 0.95)
        );
      }
      html,
      body {
        margin: 0;
        padding: 0;
        background: var(--page-bg);
        color: var(--txt);
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto,
          Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
        line-height: 1.55;
      }
      a {
        color: var(--brand);
        text-decoration: none;
      }
      a:hover {
        text-decoration: underline;
      }
      .container {
        max-width: var(--max);
        margin-inline: auto;
        padding: clamp(16px, 2.5vw, 28px);
      }
      .grid {
        display: grid;
        gap: clamp(16px, 2vw, 24px);
      }
      .btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 0.6rem;
        background: var(--brand);
        color: #042815;
        padding: 0.95rem 1.1rem;
        border-radius: 12px;
        font-weight: 700;
        border: 0;
        cursor: pointer;
        box-shadow: var(--shadow);
        transition: transform 0.08s ease, filter 0.15s ease;
      }
      .btn:hover {
        filter: brightness(1.05);
      }
      .btn:active {
        transform: translateY(1px);
      }
      .btn.secondary {
        background: transparent;
        outline: 1px solid var(--border);
        color: var(--txt);
      }
      .badge {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        background: rgba(88, 211, 140, 0.12);
        color: var(--brand);
        border: 1px solid rgba(88, 211, 140, 0.35);
        padding: 0.35rem 0.6rem;
        border-radius: 999px;
        font-weight: 700;
        font-size: 0.82rem;
      }

      h2 {
        font-size: clamp(1.4rem, 3.8vw, 2.7rem);
        line-height: 1.15;
        margin: 0.25rem 0 0.6rem;
      }

      /* HERO */
      .hero {
        padding-top: clamp(24px, 5vw, 56px);
        padding-bottom: clamp(20px, 4vw, 40px);
      }
      .hero-wrap {
        display: grid;
        grid-template-columns: 1.1fr 0.9fr;
        gap: clamp(20px, 3vw, 40px);
        align-items: center;
      }
      .hero h1 {
        font-size: clamp(1.9rem, 3.8vw, 3.2rem);
        line-height: 1.15;
        margin: 0.25rem 0 0.6rem;
      }
      .hero p.sub {
        color: var(--muted);
        font-size: clamp(1rem, 1.5vw, 1.15rem);
      }
      .hero-card {
        background: var(--card-bg);
        backdrop-filter: blur(6px);
        border: 1px solid var(--border);
        border-radius: var(--radius-lg);
        padding: clamp(18px, 2.5vw, 22px);
        box-shadow: var(--shadow);
      }
      .illus {
        min-height: 260px;
        border-radius: var(--radius-lg);
        background: var(--illus-bg);
        position: relative;
        overflow: hidden;
        border: 1px solid var(--border);
      }
      .illus::after {
        content: "";
        position: absolute;
        inset: auto -10% -35% -10%;
        height: 60%;
        background: conic-gradient(
          from 210deg at 50% 50%,
          rgba(88, 211, 140, 0.5),
          rgba(79, 176, 255, 0.35),
          transparent 60%
        );
        filter: blur(30px);
      }
      .illus .chip {
        position: absolute;
        right: 16px;
        top: 16px;
      }

      /* TRUST */
      .trust {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 14px;
      }
      .trust > div {
        background: var(--surface);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        padding: 14px;
      }
      .trust strong {
        display: block;
      }

      /* STEPS */
      .steps {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 16px;
      }
      .step {
        background: var(--surface);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        padding: 18px;
      }
      .num {
        width: 28px;
        height: 28px;
        border-radius: 50%;
        display: inline-grid;
        place-items: center;
        background: rgba(88, 211, 140, 0.18);
        border: 1px solid rgba(88, 211, 140, 0.35);
        color: var(--brand);
        font-weight: 800;
        margin-right: 8px;
      }

      /* FORM */
      form {
        display: grid;
        gap: 12px;
      }
      .field {
        display: grid;
        gap: 6px;
      }
      .field label {
        font-weight: 600;
        font-size: 0.95rem;
      }
      .input {
        border-radius: 12px;
        border: 1px solid var(--border);
        background: var(--input-bg);
        color: var(--txt);
        padding: 0.85rem 0.95rem;
        outline: none;
      }
      .input::placeholder {
        color: #a8b7cd;
      }
      .row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 12px;
      }
      .hint {
        color: var(--muted);
        font-size: 0.9rem;
      }
      .error {
        color: var(--danger);
        font-size: 0.9rem;
      }
      .success {
        color: var(--ok);
      }

      /* FOOTER */
      footer {
        margin-top: 36px;
        border-top: 1px solid var(--border);
        padding-top: 18px;
        color: var(--muted);
      }
      details {
        background: var(--surface);
        border: 1px solid var(--border);
        padding: 12px;
        border-radius: 12px;
      }

      /* MOBILE */
      @media (max-width: 900px) {
        .hero-wrap {
          grid-template-columns: 1fr;
        }
        .trust {
          grid-template-columns: 1fr;
        }
        .steps {
          grid-template-columns: 1fr;
        }
        .row {
          grid-template-columns: 1fr;
        }
      }

      /* Sticky CTA (mobile) */
      .sticky-cta {
        position: sticky;
        bottom: 0;
        inset-inline: 0;
        background: var(--sticky-bg);
        padding: 10px 14px;
        backdrop-filter: blur(6px);
        border-top: 1px solid var(--border);
      }
      .stack {
        display: flex;
        gap: 10px;
      }
      .stack .btn {
        flex: 1;
      }
    </style>
  </head>
  <body>
    <header class="container" aria-label="Topbar">
      <div
        style="
          display: flex;
          align-items: center;
          justify-content: space-between;
          gap: 16px;
        "
      >
        <div style="display: flex; align-items: center; gap: 0.6rem">
          <span class="badge">Vogtland</span>
          <strong style="font-size: 1.05rem">WÃ¤rmepumpen Beratung</strong>
        </div>
        <nav style="display: flex; align-items: center; gap: 0.9rem">
          <a href="#formular" class="btn" style="padding: 0.6rem 0.8rem"
            >Kostenfreie Beratung sichern</a
          >
          <button
            id="themeToggleBtn"
            class="btn secondary"
            type="button"
            aria-label="Darstellung umschalten"
          >
            ðŸŒ™
          </button>
        </nav>
      </div>
    </header>

    <main>
      <!-- HERO -->
      <section class="hero">
        <div class="container hero-wrap">
          <div class="hero-copy">
            <span class="badge">Regional & persÃ¶nlich</span>
            <h1>
              Ihre WÃ¤rmepumpe im Vogtland â€“
              <span style="color: var(--brand)">FÃ¶rderung bis 15.000Â â‚¬</span>
              sichern
            </h1>
            <p class="sub">
              Kostenfreie Beratung. Wir empfehlen Ihnen die passende LÃ¶sung und
              kÃ¼mmern uns um die FÃ¶rderantrÃ¤ge.
            </p>
            <div
              style="
                display: flex;
                gap: 10px;
                flex-wrap: wrap;
                margin-top: 12px;
              "
            >
              <a class="btn" href="#formular"
                >Jetzt kostenfreie Beratung sichern</a
              >
              <a class="btn secondary" href="tel:+493741000000"
                >Oder direkt anrufen: 03741Â 000000</a
              >
            </div>

            <!-- <div class="container" style="padding: 0; margin: 18px 0 0 0">
              <div class="trust">
                <div>
                  <strong>Vorâ€‘Ortâ€‘Termin</strong
                  ><span class="hint"
                    >Im gesamten Vogtland â€“ schnell & unkompliziert</span
                  >
                </div>
                <div>
                  <strong>FÃ¶rderservice</strong
                  ><span class="hint">Wir unterstÃ¼tzen bei allen AntrÃ¤gen</span>
                </div>
                <div>
                  <strong>PersÃ¶nlicher Kontakt</strong
                  ><span class="hint"
                    >Direkter Ansprechpartner statt Callcenter</span
                  >
                </div>
              </div>
            </div> -->
          </div>
          <!-- <div class="hero-card">
            <div class="illus">
              <span class="chip badge">COâ‚‚ sparen Â· Kosten senken</span>
            </div>
            <div style="margin-top: 14px" class="hint">
              Kostenfreie & unverbindliche Erstberatung.
              <strong style="color: #fff">Dauer: 15â€“20Â Min.</strong>
            </div>
            <div style="margin-top: 12px">
              <a class="btn" href="#formular">RÃ¼ckruf anfordern</a>
            </div>
          </div> -->
        </div>
      </section>

      <!-- WARUM KURZ -->
      <section id="vorteile">
        <div class="container">
          <h2 style="margin: 0 0 8px; color: var(--brand)">
            Vorteile einer WÃ¤rmepumpe
          </h2>
          <p class="hint" style="margin-top: 0">
            Kurz & knapp â€“ die 3 wichtigsten Punkte:
          </p>
          <div class="steps" style="margin-top: 12px">
            <div class="step">
              <span class="num">1</span><strong>Heizkosten senken</strong>
              <div class="hint">
                Moderne Systeme arbeiten effizient â€“ besonders mit
                FuÃŸbodenheizung oder geeigneten HeizkÃ¶rpern.
              </div>
            </div>
            <div class="step">
              <span class="num">2</span><strong>UnabhÃ¤ngiger werden</strong>
              <div class="hint">
                Weniger abhÃ¤ngig von Ã–l & Gas â€“ Strom kann teilweise selbst
                erzeugt werden (PV).
              </div>
            </div>
            <div class="step">
              <span class="num">3</span><strong>Staatliche FÃ¶rderung</strong>
              <div class="hint">
                Bis zu 15.000Â â‚¬ mÃ¶glich â€“ wir prÃ¼fen Ihre FÃ¶rderfÃ¤higkeit und
                Ã¼bernehmen den Papierkram.
              </div>
            </div>
          </div>
          <!-- <div class="hint" style="margin-top: 8px">
            * FÃ¶rderhÃ¶he abhÃ¤ngig von individuellen Voraussetzungen (z.â€¯B.
            Austausch alter Heizung, GebÃ¤udestatus). Keine Rechtsberatung.
          </div> -->
        </div>
      </section>

      <!-- ABLAUF -->
      <!-- <section id="ablauf">
        <div class="container">
          <h2 style="margin: 0 0 8px; color: var(--brand)">So lÃ¤uftâ€™s ab</h2>
          <div class="steps" style="margin-top: 12px">
            <div class="step">
              <span class="num">1</span><strong>Formular ausfÃ¼llen</strong>
              <div class="hint">Kontaktdaten & PLZ â€“ dauert 1Â Minute.</div>
            </div>
            <div class="step">
              <span class="num">2</span><strong>RÃ¼ckruf</strong>
              <div class="hint">
                Wir melden uns und klÃ¤ren die wichtigsten Fragen.
              </div>
            </div>
            <div class="step">
              <span class="num">3</span><strong>Vorâ€‘Ortâ€‘Termin</strong>
              <div class="hint">
                Wir schauen uns Heizung & Haus an und besprechen die beste
                LÃ¶sung.
              </div>
            </div>
          </div>
        </div>
      </section> -->

      <!-- FORMULAR -->
      <section
        id="formular"
        class="container"
        aria-label="Kontaktformular"
        style="scroll-margin-top: 60px"
      >
        <div
          style="
            display: grid;
            grid-template-columns: 1.1fr 0.9fr;
            gap: clamp(16px, 2vw, 24px);
          "
        >
          <div>
            <h2 style="margin: 0 0 6px; color: var(--brand)">
              Kostenfreie Beratung sichern
            </h2>
            <p class="hint" style="margin-top: 0">
              Wir rufen Sie werktags innerhalb von 24 Stunden zurÃ¼ck.
              <!-- <strong style="color: #fff">Vorrang fÃ¼r PLZ im Vogtland</strong>. -->
            </p>

            <form id="leadForm" novalidate>
              <!-- <div class="field">
                <label for="name">Ihr Name*</label>
                <input
                  class="input"
                  id="name"
                  name="name"
                  type="text"
                  autocomplete="name"
                  placeholder="Max Mustermann"
                  required
                />
                <div class="error" data-err-for="name"></div>
              </div> -->
              <div class="row">
                <div class="field">
                  <label for="name">Ihr Name*</label>
                  <input
                    class="input"
                    id="name"
                    name="name"
                    type="text"
                    autocomplete="name"
                    placeholder="Max Mustermann"
                    required
                  />
                  <div class="error" data-err-for="name"></div>
                </div>
                <div class="field">
                  <label for="phone">Telefon*</label>
                  <input
                    class="input"
                    id="phone"
                    name="phone"
                    type="tel"
                    inputmode="tel"
                    placeholder="z.â€¯B. 0171Â 1234567"
                    pattern="[0-9+()\-\s]{6,}"
                    required
                  />
                  <div class="error" data-err-for="phone"></div>
                </div>

                <!-- <div class="field">
                  <label for="zip">PLZ*</label>
                  <input
                    class="input"
                    id="zip"
                    name="zip"
                    type="text"
                    inputmode="numeric"
                    placeholder="z.â€¯B. 08523"
                    pattern="\d{5}"
                    required
                  />
                  <div class="error" data-err-for="zip"></div>
                </div> -->
              </div>
              <!-- <div class="row">
                <div class="field">
                  <label for="email">Eâ€‘Mail (optional)</label>
                  <input
                    class="input"
                    id="email"
                    name="email"
                    type="email"
                    autocomplete="email"
                    placeholder="name@beispiel.de"
                  />
                  <div class="error" data-err-for="email"></div>
                </div>
                <div class="field">
                  <label for="callback"
                    >Bevorzugte RÃ¼ckrufzeit (optional)</label
                  >
                  <select class="input" id="callback" name="callback">
                    <option value="">Egal</option>
                    <option>Vormittags</option>
                    <option>Nachmittags</option>
                    <option>Abends</option>
                  </select>
                </div>
              </div> -->
              <div class="field">
                <label for="notes">Anmerkungen (optional)</label>
                <textarea
                  class="input"
                  id="notes"
                  name="notes"
                  rows="3"
                  placeholder="Kurze Info zu Ihrer aktuellen Heizung oder Fragen"
                ></textarea>
              </div>

              <!-- Consent -->
              <div class="field" style="gap: 10px">
                <label
                  style="display: flex; align-items: flex-start; gap: 0.6rem"
                >
                  <input
                    type="checkbox"
                    id="consent"
                    required
                    style="margin-top: 0.25rem"
                  />
                  <span
                    >Ich bin mit der Verarbeitung meiner Daten zum Zweck der
                    Kontaktaufnahme einverstanden und habe den
                    <a href="#datenschutz">Datenschutzhinweis</a> gelesen.</span
                  >
                </label>
                <div class="error" data-err-for="consent"></div>
              </div>

              <!-- Hidden tracking fields (autoâ€‘filled) -->
              <input type="hidden" name="utm_source" />
              <input type="hidden" name="utm_medium" />
              <input type="hidden" name="utm_campaign" />
              <input type="hidden" name="utm_term" />
              <input type="hidden" name="utm_content" />
              <input type="hidden" name="gclid" />
              <input type="hidden" name="ttclid" />
              <input type="hidden" name="referrer" />
              <input type="hidden" name="page_url" />
              <input type="hidden" name="user_agent" />

              <!-- FormSubmit optimization fields -->
              <input
                type="hidden"
                name="_subject"
                value="Neue WÃ¤rmepumpen-Anfrage - Vogtland"
              />
              <input type="hidden" name="_captcha" value="false" />
              <input
                type="text"
                name="_honey"
                style="display: none"
                tabindex="-1"
                autocomplete="off"
              />

              <div
                style="
                  display: flex;
                  gap: 10px;
                  align-items: center;
                  flex-wrap: wrap;
                  margin-top: 4px;
                "
              >
                <button class="btn" type="submit" id="submitBtn">Senden</button>
                <!-- <a class="btn secondary" href="tel:+493741000000"
                  >Oder anrufen: 03741Â 000000</a
                > -->
                <span class="hint" id="formHint"></span>
              </div>
            </form>
          </div>

          <!-- Kontakt/Trust Card -->
          <aside>
            <div class="hero-card">
              <h3 style="margin-top: 4px; margin-bottom: 8px">
                Ihr Ansprechpartner
              </h3>
              <div style="display: flex; gap: 12px; align-items: center">
                <div
                  style="
                    width: 56px;
                    height: 56px;
                    border-radius: 50%;
                    background: linear-gradient(135deg, #4fb0ff44, #58d38c44);
                    border: 1px solid var(--border);
                  "
                ></div>
                <div>
                  <strong>CP</strong>
                  <div class="hint">Vogtland WÃ¤rmepumpen Beratung</div>
                  <div class="hint">
                    Telefon: <a href="tel:+493741000000">03741Â 000000</a>
                  </div>
                </div>
              </div>
              <!-- <ul style="margin: 14px 0 0; padding: 0 0 0 18px">
                <li class="hint">
                  Kostenlose Erstberatung Â· Keine Verpflichtung
                </li>
                <li class="hint">Vorâ€‘Ortâ€‘Termin innerhalb weniger Tage</li>
                <li class="hint">UnterstÃ¼tzung bei FÃ¶rderantrÃ¤gen</li>
              </ul> -->
            </div>
          </aside>
        </div>
      </section>

      <!-- <div class="sticky-cta" aria-hidden="true">
        <div class="container">
          <div class="stack">
            <a class="btn" href="#formular">Kostenfreie Beratung anfordern</a>
            <a class="btn secondary" href="tel:+493741000000">Anrufen</a>
          </div>
        </div>
      </div> -->
    </main>

    <footer class="container">
      <div style="display: grid; gap: 14px">
        <!-- <details id="datenschutz">
          <summary><strong>Datenschutzhinweis (Kurzfassung)</strong></summary>
          <p class="hint">
            Wir verwenden Ihre Angaben ausschlieÃŸlich zur Kontaktaufnahme und
            zur Vorbereitung eines BeratungsgesprÃ¤chs. Rechtsgrundlage: Art.Â 6
            Abs.Â 1 lit.Â b DSGVO (vorvertragliche MaÃŸnahmen). Eine Weitergabe an
            Dritte erfolgt nicht ohne Ihre Einwilligung. Sie kÃ¶nnen Ihre
            Einwilligung jederzeit mit Wirkung fÃ¼r die Zukunft widerrufen
            (Eâ€‘Mail siehe Impressum). VollstÃ¤ndige Informationen finden Sie in
            unserer DatenschutzerklÃ¤rung.
          </p>
        </details>
        <details>
          <summary>
            <strong>Impressum (Platzhalter â€“ bitte ausfÃ¼llen)</strong>
          </summary>
          <p class="hint">
            Firma/Name, StraÃŸe, PLZ Ort (Vogtland), Telefon, Eâ€‘Mail,
            Vertretungsberechtigte Person, UStâ€‘ID/Steuernummer, Registereintrag
            (falls vorhanden).
          </p>
        </details> -->
        <div class="hint">
          Â© <span id="year"></span> WÃ¤rmepumpen Beratung Vogtland. Alle Rechte
          vorbehalten.
        </div>
      </div>
    </footer>

    <script>
      // =======================
      // CONFIG
      // =======================
      // Wenn ihr bereits einen Formularâ€‘Endpoint habt (z.Â B. eigenes Backend oder Formspree), hier eintragen:
      // Beispiel Formspree: https://formspree.io/f/ABCDEFGH
      const SUBMIT_ENDPOINT = "https://formsubmit.co/ajax/kevreuss@gmail.com";

      // =======================
      // Helper
      // =======================
      function $(q, ctx = document) {
        return ctx.querySelector(q);
      }
      function $all(q, ctx = document) {
        return Array.from(ctx.querySelectorAll(q));
      }
      function setErr(id, msg) {
        const el = document.querySelector(`[data-err-for="${id}"]`);
        if (el) {
          el.textContent = msg || "";
        }
      }
      function serializeForm(form) {
        const data = {};
        new FormData(form).forEach((v, k) => {
          data[k] = v;
        });
        return data;
      }
      function getParams() {
        const u = new URL(location.href);
        const p = Object.fromEntries(u.searchParams.entries());
        return p;
      }
      function fillHiddenTracking(form) {
        const params = getParams();
        const map = [
          "utm_source",
          "utm_medium",
          "utm_campaign",
          "utm_term",
          "utm_content",
          "gclid",
          "ttclid",
        ];
        map.forEach((k) => {
          const input = form.querySelector(`[name="${k}"]`);
          if (input) {
            input.value = params[k] || "";
          }
        });
        form.querySelector('[name="referrer"]').value = document.referrer || "";
        form.querySelector('[name="page_url"]').value = location.href;
        form.querySelector('[name="user_agent"]').value = navigator.userAgent;
      }

      // =======================
      // THEME TOGGLE
      // =======================
      const THEME_KEY = "wpv_theme";
      (function initTheme() {
        const saved = localStorage.getItem(THEME_KEY) || "light";
        document.documentElement.setAttribute("data-theme", saved);
        const btn = $("#themeToggleBtn");
        if (btn) {
          btn.textContent = saved === "dark" ? "â˜€ï¸" : "ðŸŒ™";
        }
      })();
      const themeBtn = document.getElementById("themeToggleBtn");
      if (themeBtn) {
        themeBtn.addEventListener("click", () => {
          const current =
            document.documentElement.getAttribute("data-theme") || "light";
          const next = current === "dark" ? "light" : "dark";
          document.documentElement.setAttribute("data-theme", next);
          localStorage.setItem(THEME_KEY, next);
          themeBtn.textContent = next === "dark" ? "â˜€ï¸" : "ðŸŒ™";
        });
      }

      // =======================
      // Validation minimalistisch & konversionsfreundlich
      // =======================
      function validate(form) {
        let ok = true;
        const name = form.name.value.trim();
        const phone = form.phone.value.trim();
        // const zip = form.zip.value.trim();
        const consent = $("#consent").checked;

        setErr("name", "");
        setErr("phone", "");
        // setErr("zip", "");
        setErr("consent", "");

        if (!name) {
          setErr("name", "Bitte Namen angeben.");
          ok = false;
        }
        if (!phone || !/[0-9+()\-\s]{6,}/.test(phone)) {
          setErr("phone", "Bitte Telefonnummer prÃ¼fen.");
          ok = false;
        }
        // if (!/^[0-9]{5}$/.test(zip)) {
        //   setErr("zip", "Bitte 5â€‘stellige PLZ eingeben.");
        //   ok = false;
        // }
        if (!consent) {
          setErr("consent", "Bitte Einwilligung bestÃ¤tigen.");
          ok = false;
        }
        return ok;
      }

      // =======================
      // Submit
      // =======================
      $("#year").textContent = new Date().getFullYear();
      const form = $("#leadForm");
      fillHiddenTracking(form);

      form.addEventListener("submit", async (e) => {
        e.preventDefault();
        const hint = $("#formHint");
        const btn = $("#submitBtn");
        hint.textContent = "";

        if (!validate(form)) return;

        btn.disabled = true;
        btn.textContent = "Senden â€¦";
        const payload = serializeForm(form);

        try {
          // JSON POST an FormSubmit
          const res = await fetch(SUBMIT_ENDPOINT, {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
              Accept: "application/json",
            },
            body: JSON.stringify(payload),
          });
          if (!res.ok) throw new Error("Serverfehler");
          hint.innerHTML =
            '<span class="success">Danke! Wir melden uns in KÃ¼rze.</span>';
          form.reset();
          $("#consent").checked = false;
        } catch (err) {
          console.error(err);
          hint.innerHTML =
            '<span class="error">Leider hat etwas nicht geklappt. Bitte rufen Sie uns kurz an oder versuchen Sie es erneut.</span>';
        } finally {
          btn.disabled = false;
          btn.textContent = "Senden";
        }
      });

      // CTAâ€‘Links scrollen smooth
      $all('a[href^="#"]').forEach((a) => {
        a.addEventListener("click", (ev) => {
          const id = a.getAttribute("href").slice(1);
          const el = document.getElementById(id);
          if (el) {
            ev.preventDefault();
            el.scrollIntoView({ behavior: "smooth", block: "start" });
          }
        });
      });
    </script>

    <!-- SEO LocalBusiness (Platzhalter â€“ bitte mit echten Daten ersetzen) -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "LocalBusiness",
        "name": "WÃ¤rmepumpen Beratung Vogtland",
        "areaServed": "Vogtland",
        "address": {
          "@type": "PostalAddress",
          "addressLocality": "Vogtland",
          "addressCountry": "DE"
        },
        "telephone": "+49-3741-000000",
        "url": ""
      }
    </script>
  </body>
</html>
